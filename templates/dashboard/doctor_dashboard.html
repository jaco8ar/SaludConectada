{% extends "base.html" %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="/static/styles/dashboard/doctor_dashboard.css">
{% endblock %}

{% block content %}
  <div class="dashboard-container">
    <div class="dashboard-header">
      <h1>Panel del médico</h1>
      <p class="subtitle">Gestiona tus citas y pacientes</p>
    </div>

    <!-- Quick Access Section -->
    <section class="quick-access-section">
      <h2>Accesos rápidos</h2>
      <div class="quick-access-grid">
        <a href="{% url 'scheduling:doctor_appointments' %}" class="access-card">
          <div class="card-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
              <line x1="16" y1="2" x2="16" y2="6"></line>
              <line x1="8" y1="2" x2="8" y2="6"></line>
              <line x1="3" y1="10" x2="21" y2="10"></line>
            </svg>
          </div>
          <div class="card-content">
            <h3>Mis citas</h3>
            <p>Ver todas las citas programadas</p>
          </div>
        </a>

        <a href="{% url 'scheduling:doctor_availability' %}" class="access-card">
          <div class="card-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="10"></circle>
              <polyline points="12 6 12 12 16 14"></polyline>
            </svg>
          </div>
          <div class="card-content">
            <h3>Mi disponibilidad</h3>
            <p>Configurar horarios disponibles</p>
          </div>
        </a>
      </div>
    </section>

    <!-- Upcoming Appointments Section -->
    <section class="appointments-section">
      <h2>Próximas citas</h2>
      {% if upcoming_appointments %}
        <div class="appointments-list">
          {% for appt in upcoming_appointments %}
            <div class="appointment-card">
              <div class="appointment-header">
                <div class="patient-info">
                  <div class="patient-avatar">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                      <circle cx="12" cy="7" r="4"></circle>
                    </svg>
                  </div>
                  <div class="patient-details">
                    <h3>{{ appt.patient }}</h3>
                    <p class="appointment-datetime">{{ appt.scheduled_datetime|date:"d/m/Y - H:i" }}</p>
                  </div>
                </div>
                <span class="status-badge status-{{ appt.status }}">{{ appt.get_status_display }}</span>
              </div>
              
              <div class="appointment-actions">
                <a href="{% url 'clinical:video_call' appt.id %}" class="action-btn btn-primary">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polygon points="23 7 16 12 23 17 23 7"></polygon>
                    <rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect>
                  </svg>
                  Videollamada
                </a>
                <a href="{% url 'clinical:doctor_patient_record' appt.id %}" class="action-btn btn-secondary">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                    <polyline points="14 2 14 8 20 8"></polyline>
                    <line x1="16" y1="13" x2="8" y2="13"></line>
                    <line x1="16" y1="17" x2="8" y2="17"></line>
                    <polyline points="10 9 9 9 8 9"></polyline>
                  </svg>
                  Historial
                </a>
                <a href="{% url 'clinical:manage_consultation' appt.id %}" class="action-btn btn-secondary">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                  </svg>
                  Notas
                </a>
              </div>
            </div>
          {% endfor %}
        </div>
      {% else %}
        <div class="empty-state">
          <div class="empty-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
              <line x1="16" y1="2" x2="16" y2="6"></line>
              <line x1="8" y1="2" x2="8" y2="6"></line>
              <line x1="3" y1="10" x2="21" y2="10"></line>
            </svg>
          </div>
          <h3>No tienes citas próximas</h3>
          <p>Tus próximas citas aparecerán aquí</p>
        </div>
      {% endif %}
    </section>
  </div>
{% endblock %}


