{% extends "base.html" %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="/static/styles/dashboard/doctor_dashboard.css">
{% endblock %}

{% block content %}
  <div class="dashboard-container">
    <div class="dashboard-header">
      <h1>Panel del médico</h1>
      <p class="subtitle">Gestiona tus citas y pacientes</p>
    </div>

    <!-- Quick Access Section -->
    <section class="quick-access-section">
      <h2>Accesos rápidos</h2>
      <div class="quick-access-grid">
        <a href="{% url 'scheduling:doctor_appointments' %}" class="access-card">
          <div class="card-icon">
            <img src="{% static 'svg/calendar-icon.svg' %}" alt="">
          </div>
          <div class="card-content">
            <h3>Mis citas</h3>
            <p>Ver todas las citas programadas</p>
          </div>
        </a>

        <a href="{% url 'scheduling:doctor_availability' %}" class="access-card">
          <div class="card-icon">
            <img src="{% static 'svg/clock-icon.svg' %}" alt="">
          </div>
          <div class="card-content">
            <h3>Mi disponibilidad</h3>
            <p>Configurar horarios disponibles</p>
          </div>
        </a>
      </div>
    </section>

    <!-- Upcoming Appointments Section -->
    <section class="appointments-section">
      <h2>Próximas citas</h2>
      {% if upcoming_appointments %}
        <div class="appointments-list">
          {% for appt in upcoming_appointments %}
            <div class="appointment-card">
              <div class="appointment-header">
                <div class="patient-info">
                  <div class="patient-avatar">
                    <img src="{% static 'svg/user-avatar-icon.svg' %}" alt="">
                  </div>
                  <div class="patient-details">
                    <h3>{{ appt.patient }}</h3>
                    <p class="appointment-datetime">{{ appt.scheduled_datetime|date:"d/m/Y - H:i" }}</p>
                  </div>
                </div>
                <span class="status-badge status-{{ appt.status }}">{{ appt.get_status_display }}</span>
              </div>
              
              <div class="appointment-actions">
                <a href="{% url 'clinical:video_call' appt.id %}" class="action-btn btn-primary">
                  <img src="{% static 'svg/video-call-icon.svg' %}" alt="">
                  Videollamada
                </a>
                <a href="{% url 'clinical:doctor_patient_record' appt.id %}" class="action-btn btn-secondary">
                  <img src="{% static 'svg/history-icon.svg' %}" alt="">
                  Historial
                </a>
                <a href="{% url 'clinical:manage_consultation' appt.id %}" class="action-btn btn-secondary">
                  <img src="{% static 'svg/notes-edit-icon.svg' %}" alt="">
                  Notas
                </a>
              </div>
            </div>
          {% endfor %}
        </div>
      {% else %}
        <div class="empty-state">
          <div class="empty-icon">
            <img src="{% static 'svg/calendar-icon.svg' %}" width="48" height="48" alt="">
          </div>
          <h3>No tienes citas próximas</h3>
          <p>Tus próximas citas aparecerán aquí</p>
        </div>
      {% endif %}
    </section>
  </div>
{% endblock %}


